<div class="container">
  <div class="card my-5">
    <div class="card-header justify-content-between align-items-center d-flex">
      <h1>Profile Details</h1>
    </div>
    <div class="card-body">
      @switch (mode()) {
        @case ('show') {
          <div class="mb-3 row">
            <div class="col-12">
              <app-input name="id" label="ID" [control]="profileForm.controls.id"/>
            </div>
          </div>
          <div class="mb-3 row">
            <div class="col-6">
              <app-input name="username" label="Username" [control]="profileForm.controls.username"/>
            </div>
            <div class="col-6">
              <app-input name="role" label="Role" [control]="profileForm.controls.role"/>
            </div>
          </div>
          @if (user.role === 'customer') {
            <hr>
            <h1 class="mb-3">Customer Details</h1>
            <div class="mb-3 row">
              <div class="col-12">
                <app-input name="id" label="ID" [control]="customerForm.controls.id"/>
              </div>
            </div>
            <div class="mb-3 row">
              <div class="col-6">
                <app-input name="firstName" label="First Name" [control]="customerForm.controls.firstName"/>
              </div>
              <div class="col-6">
                <app-input name="lastName" label="Last Name" [control]="customerForm.controls.lastName"/>
              </div>
            </div>
            <div class="mb-3 row">
              <div class="col-6">
                <app-input name="gender" label="Gender" [control]="customerForm.controls.gender"/>
              </div>
              <div class="col-6">
                <app-input name="birthdate" label="Birthdate" [control]="customerForm.controls.birthdate"/>
              </div>
            </div>
          }
          <hr>
          <h1 class="mb-3">Actions</h1>
          <div class="mb-3 row">
            <div class="col-4 d-flex flex-column align-items-stretch">
              <button class="btn btn-primary" (click)="editUsername()">Change Username</button>
            </div>
            <div class="col-4 d-flex flex-column align-items-stretch">
              <button class="btn btn-info" (click)="editPassword()">Change Password</button>
            </div>
            <div class="col-4 d-flex flex-column align-items-stretch">
              <button class="btn btn-danger" (click)="delete()">Delete Account</button>
            </div>
          </div>
        }
        @case ('changeUsername') {
          <h1 class="mb-3">Set new Username</h1>
          <div class="mb-3 row d-flex align-items-end">
            <div class="col-10">
              <app-input label="Username" name="username" [control]="profileForm.controls.username" />
            </div>
            <div class="col-1 d-flex align-items-stretch flex-column"><button class="btn btn-danger" (click)="cancel()">Cancel</button></div>
            <div class="col-1 d-flex align-items-stretch flex-column"><button class="btn btn-success" (click)="submitNewUsername()">Submit</button></div>
          </div>
        }

        @case ('changePassword') {
          <h1 class="mb-3">Set new Password</h1>
          <div class="mb-3 row d-flex align-items-end">
            <div class="col-5">
              <app-input label="Password" name="password" type="password" [control]="passwordForm.controls.password" />
            </div>
            <div class="col-5">
              <app-input label="Repeat Password" name="password_confirmation" type="password" [control]="passwordForm.controls.passwordConfirmation" />
            </div>
            <div class="col-1 d-flex align-items-stretch flex-column"><button class="btn btn-danger" (click)="cancel()">Cancel</button></div>
            <div class="col-1 d-flex align-items-stretch flex-column"><button class="btn btn-success" (click)="submitNewPassword()">Submit</button></div>
          </div>
        }
      }
    </div>
  </div>
</div>
